# Домашнее задание для лекции №2

## 1. Открыть консоль и зайти по ssh на ВМ
![alt text](<img/CleanShot 2024-10-06 at 09.07.24@2x.png>)
## 2. открыть вторую консоль и также зайти по ssh на ту же ВМ (можно в докере 2 сеанса)
![alt text](<img/CleanShot 2024-10-06 at 09.07.37@2x.png>)
## 3. запустить везде psql из под пользователя postgres
![alt text](<img/CleanShot 2024-10-06 at 09.10.35@2x.png>)
## 4. сделать в первой сессии новую таблицу и наполнить ее данными
```sql
CREATE DATABASE wb;
CREATE SCHEMA slava;
CREATE TABLE slava.test (i int);
insert into slava.test values (1);
```
## 5. посмотреть текущий уровень изоляции:
```bash
postgres=# show transaction isolation level;
 transaction_isolation
-----------------------
 read committed
(1 row)
```
## 6. начать новую транзакцию в обеих сессиях с дефолтным (не меняя) уровнем изоляции
![alt text](<img/CleanShot 2024-10-06 at 09.34.27@2x.png>)
## 7. в первой сессии добавить новую запись
```bash
wb=*# insert into slava.test values (2);
INSERT 0 1
```
## 8. сделать запрос на выбор всех записей во второй сессии
```bash
wb=*# select * from slava.test;
 i
---
 1
(1 row)
```
## 9. видите ли вы новую запись и если да то почему? После задания можете сверить правильный ответ с эталонным (будет доступен после 3 лекции)
Нет, не вижу, так как при уровне изоляции read committed - транзакции видят только подтвержденные изменения других транзакций, а мы еще не завершили транзвкцию с изменением.
## 10. завершить транзакцию в первом окне
```bash
wb=*# COMMIT;
COMMIT
```
## 11. сделать запрос на выбор всех записей второй сессии
```bash
wb=*# SELECT * FROM slava.test;
 i
---
 1
 2
(2 rows)
```
## 12. видите ли вы новую запись и если да то почему?
Да, вижу, так как теперь изменение считается подтвержденным.
## 13. завершите транзакцию во второй сессии
```bash
wb=*# COMMIT;
COMMIT
```
## 14. начать новые транзакции, но уже на уровне repeatable read в ОБЕИХ сессиях
![alt text](<img/CleanShot 2024-10-06 at 09.52.03@2x.png>)
## 15. в первой сессии добавить новую запись
```bash
wb=*# insert into slava.test values (3);
INSERT 0 1
```
## 16. сделать запрос на выбор всех записей во второй сессии
```bash
wb=*# SELECT * FROM slava.test;
 i
---
 1
 2
(2 rows)
```
## 17. видите ли вы новую запись и если да то почему?
Нет, не вижу, в этом режиме транзакции видят только данные, которые были считаны на момент начала транзакции.
## 18. завершить транзакцию в первом окне
```bash
wb=*# COMMIT;
COMMIT
```
## 19. сделать запрос во выбор всех записей второй сессии
```bash
wb=*# SELECT * FROM slava.test;
 i
---
 1
 2
(2 rows)
```
## 20. видите ли вы новую запись и если да то почему?

Нет, не вижу, так как новая запись появилась после момента начала транзакции.